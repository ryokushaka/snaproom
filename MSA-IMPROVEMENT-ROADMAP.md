# Snaproom MSA ê°œì„  ë¡œë“œë§µ

## ğŸ“Š í˜„ì¬ ìƒíƒœ ë¶„ì„

**MSA ì í•©ì„±**: 85% (ìš°ìˆ˜)
**ë¶„ì„ ì¼ì**: 2025-07-31
**ë¶„ì„ ë²”ìœ„**: snaproom, snaproom-react, snaproom-laravel, snaproom-infrastructure

### í˜„ì¬ ì•„í‚¤í…ì²˜ ê°•ì 
- âœ… Event-Driven Architecture (Kafka)
- âœ… Redis í´ëŸ¬ìŠ¤í„°ë§ (Master-Replica-Sentinel)
- âœ… Infrastructure as Code (Terraform)
- âœ… ì»¨í…Œì´ë„ˆí™” ë° ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
- âœ… Health ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ

### ì£¼ìš” ê°œì„  í•„ìš” ì˜ì—­
- âš ï¸ ë„ë©”ì¸ ë¶„ë¦¬ ë° ë°ì´í„° ê²©ë¦¬ (70%)
- âš ï¸ ë°°í¬ ë° ìŠ¤ì¼€ì¼ë§ ì „ëµ (75%)
- âš ï¸ ì„œë¹„ìŠ¤ ë©”ì‹œ ë° íŠ¸ë˜í”½ ê´€ë¦¬
- âš ï¸ ë¶„ì‚° íŠ¸ëœì­ì…˜ íŒ¨í„´

---

## ğŸ—ºï¸ 3ë‹¨ê³„ ê°œì„  ë¡œë“œë§µ

### Phase 1: ì„œë¹„ìŠ¤ ë¶„ë¦¬ ê¸°ë°˜ êµ¬ì¶• (3-6ê°œì›”)
**ëª©í‘œ**: 85% â†’ 90% MSA ì í•©ì„±

#### 1.1 ë„ë©”ì¸ ê¸°ë°˜ ì„œë¹„ìŠ¤ ë¶„í• 
**í˜„ì¬ ìƒíƒœ**: ë‹¨ì¼ Laravel ì• í”Œë¦¬ì¼€ì´ì…˜
**ê°œì„  ëª©í‘œ**: ë„ë©”ì¸ë³„ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë¶„ë¦¬

```mermaid
graph TD
    A[í˜„ì¬: Laravel Monolith] --> B[User Service]
    A --> C[Notification Service]
    A --> D[Audit Service]
    A --> E[Content Service]
```

**êµ¬í˜„ ê³„íš**:
- [ ] ë„ë©”ì¸ ê²½ê³„ ì‹ë³„ ë° ì •ì˜
- [ ] ì„œë¹„ìŠ¤ë³„ ë°ì´í„°ë² ì´ìŠ¤ ë¶„ë¦¬
- [ ] API ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„
- [ ] ì´ë²¤íŠ¸ ìŠ¤í‚¤ë§ˆ ì •ê·œí™”

#### 1.2 Database per Service íŒ¨í„´ ì ìš©
**í˜„ì¬**: ë‹¨ì¼ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤
**ê°œì„ **: ì„œë¹„ìŠ¤ë³„ ë…ë¦½ ë°ì´í„°ë² ì´ìŠ¤

```yaml
databases:
  user_service_db:
    engine: PostgreSQL
    purpose: ì‚¬ìš©ì ì¸ì¦, í”„ë¡œí•„, ê¶Œí•œ
    
  notification_service_db:
    engine: PostgreSQL
    purpose: ì•Œë¦¼, ë©”ì‹œì§€, êµ¬ë… ê´€ë¦¬
    
  audit_service_db:
    engine: PostgreSQL
    purpose: ê°ì‚¬ ë¡œê·¸, ì»´í”Œë¼ì´ì–¸ìŠ¤
    
  content_service_db:
    engine: PostgreSQL
    purpose: ì½˜í…ì¸ , ë©”íƒ€ë°ì´í„°
```

#### 1.3 API Gateway ë„ì…
**í˜„ì¬**: ì§ì ‘ Laravel API í˜¸ì¶œ
**ê°œì„ **: ì¤‘ì•™ì§‘ì¤‘ì‹ API Gateway

**ê¶Œì¥ ì†”ë£¨ì…˜**: Kong Gateway
- ì¸ì¦/ì¸ê°€ ì¤‘ì•™í™”
- ë ˆì´íŠ¸ ë¦¬ë¯¸íŒ…
- ë¡œë“œ ë°¸ëŸ°ì‹±
- API ë²„ì „ ê´€ë¦¬

### Phase 2: ê³ ê¸‰ MSA íŒ¨í„´ ì ìš© (6-9ê°œì›”)
**ëª©í‘œ**: 90% â†’ 95% MSA ì í•©ì„±

#### 2.1 Service Mesh êµ¬í˜„
**ì„ íƒ ê¸°ìˆ **: Istio
- ì„œë¹„ìŠ¤ ê°„ í†µì‹  ë³´ì•ˆ
- íŠ¸ë˜í”½ ê´€ë¦¬ ë° ëª¨ë‹ˆí„°ë§
- ì¥ì•  ê²©ë¦¬ ë° íšŒë³µ

#### 2.2 Saga Pattern êµ¬í˜„
**ëª©ì **: ë¶„ì‚° íŠ¸ëœì­ì…˜ ê´€ë¦¬
**íŒ¨í„´**: Choreography-based Saga

```yaml
ì‚¬ìš©ì_ê°€ì…_Saga:
  steps:
    1. ì‚¬ìš©ì_ê³„ì •_ìƒì„± (User Service)
    2. ì•Œë¦¼_êµ¬ë…_ì„¤ì • (Notification Service)  
    3. ê°ì‚¬_ë¡œê·¸_ê¸°ë¡ (Audit Service)
  compensation:
    - ê³„ì •_ì‚­ì œ
    - êµ¬ë…_ì·¨ì†Œ
    - ë¡œê·¸_ì •ë¦¬
```

#### 2.3 Event Sourcing íŒ¨í„´
**í˜„ì¬**: ìƒíƒœ ê¸°ë°˜ ì €ì¥
**ê°œì„ **: ì´ë²¤íŠ¸ ê¸°ë°˜ ìƒíƒœ ì¬êµ¬ì„±

### Phase 3: í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ìµœì í™” (9-12ê°œì›”)
**ëª©í‘œ**: 95%+ ì™„ì „í•œ MSA

#### 3.1 Kubernetes ê¸°ë°˜ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
**í˜„ì¬**: Docker Compose
**ê°œì„ **: Kubernetes í´ëŸ¬ìŠ¤í„°

#### 3.2 ë¶„ì‚° íŠ¸ë ˆì´ì‹±
**ë„êµ¬**: Jaeger + OpenTelemetry
- ìš”ì²­ ì¶”ì 
- ì„±ëŠ¥ ë³‘ëª© ì‹ë³„
- ì˜ì¡´ì„± ë§¤í•‘

#### 3.3 Advanced Monitoring
**ìŠ¤íƒ**: Prometheus + Grafana + Alertmanager
- ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ë° ì‹œê°í™”
- ìë™ ì•Œë¦¼ ì‹œìŠ¤í…œ
- SLA/SLO ëª¨ë‹ˆí„°ë§

---

## ğŸ“‹ êµ¬í˜„ ìš°ì„ ìˆœìœ„ ë§¤íŠ¸ë¦­ìŠ¤

| ê°œì„ ì‚¬í•­ | ë¹„ì¦ˆë‹ˆìŠ¤ ì„íŒ©íŠ¸ | ê¸°ìˆ ì  ë³µì¡ë„ | êµ¬í˜„ ìš°ì„ ìˆœìœ„ |
|---------|----------------|---------------|---------------|
| ë„ë©”ì¸ ì„œë¹„ìŠ¤ ë¶„í•  | High | High | P1 (ì¦‰ì‹œ) |
| Database per Service | High | Medium | P1 (ì¦‰ì‹œ) |
| API Gateway | Medium | Low | P2 (3ê°œì›”) |
| Service Mesh | Medium | High | P3 (6ê°œì›”) |
| Event Sourcing | Low | High | P4 (9ê°œì›”) |

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ ë³€í™”

### í˜„ì¬ ê¸°ìˆ  ìŠ¤íƒ
```yaml
Frontend: React + TypeScript + FSD
Backend: Laravel + ADR Pattern  
Database: PostgreSQL (ë‹¨ì¼)
Cache: Redis Cluster
Messaging: Kafka Cluster
Infrastructure: Docker Compose + Terraform
```

### ëª©í‘œ ê¸°ìˆ  ìŠ¤íƒ
```yaml
Frontend: React + TypeScript + FSD
Gateway: Kong API Gateway
Services: 
  - User Service (Node.js/Go)
  - Notification Service (Node.js/Python)
  - Audit Service (Go/Java)
  - Content Service (Laravel/Python)
Databases: PostgreSQL (ì„œë¹„ìŠ¤ë³„)
Cache: Redis Cluster
Messaging: Kafka Cluster
Orchestration: Kubernetes
Service Mesh: Istio
Monitoring: Prometheus + Grafana + Jaeger
Infrastructure: Terraform + Helm
```

---

## ğŸ“Š ì„±ê³µ ì§€í‘œ (KPIs)

### ê¸°ìˆ  ì§€í‘œ
- **ì„œë¹„ìŠ¤ ë…ë¦½ì„±**: ì„œë¹„ìŠ¤ë³„ ë…ë¦½ ë°°í¬ ê°€ëŠ¥ì„± 100%
- **ì¥ì•  ê²©ë¦¬**: ë‹¨ì¼ ì„œë¹„ìŠ¤ ì¥ì• ê°€ ì „ì²´ ì‹œìŠ¤í…œì— ë¯¸ì¹˜ëŠ” ì˜í–¥ < 10%
- **ì‘ë‹µ ì‹œê°„**: API ê²Œì´íŠ¸ì›¨ì´ ê¸°ì¤€ í‰ê·  ì‘ë‹µ ì‹œê°„ < 200ms
- **ê°€ìš©ì„±**: ì„œë¹„ìŠ¤ë³„ 99.9% ì´ìƒ

### ìš´ì˜ ì§€í‘œ  
- **ë°°í¬ ë¹ˆë„**: ì„œë¹„ìŠ¤ë³„ ì¼ 1íšŒ ì´ìƒ ë°°í¬ ê°€ëŠ¥
- **ë³µêµ¬ ì‹œê°„**: ì¥ì•  ë°œìƒ ì‹œ í‰ê·  ë³µêµ¬ ì‹œê°„ < 15ë¶„
- **ëª¨ë‹ˆí„°ë§ ì»¤ë²„ë¦¬ì§€**: ëª¨ë“  ì„œë¹„ìŠ¤ 100% ë©”íŠ¸ë¦­ ìˆ˜ì§‘

---

## ğŸš¨ ìœ„í—˜ ìš”ì†Œ ë° ëŒ€ì‘ ë°©ì•ˆ

### ì£¼ìš” ìœ„í—˜ ìš”ì†Œ
1. **ë°ì´í„° ì¼ê´€ì„±**: ë¶„ì‚° íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì¸í•œ ë³µì¡ì„±
2. **ë„¤íŠ¸ì›Œí¬ ì§€ì—°**: ì„œë¹„ìŠ¤ ê°„ í†µì‹  ì˜¤ë²„í—¤ë“œ
3. **ìš´ì˜ ë³µì¡ì„±**: ë‹¤ìˆ˜ ì„œë¹„ìŠ¤ ê´€ë¦¬ ë¶€ë‹´

### ëŒ€ì‘ ì „ëµ
1. **ë‹¨ê³„ì  ë§ˆì´ê·¸ë ˆì´ì…˜**: Big Bang ë°©ì‹ ëŒ€ì‹  ì ì§„ì  ì „í™˜
2. **ì¶©ë¶„í•œ í…ŒìŠ¤íŠ¸**: í†µí•© í…ŒìŠ¤íŠ¸ ë° ì¹´ë‚˜ë¦¬ ë°°í¬
3. **ëª¨ë‹ˆí„°ë§ ê°•í™”**: ì‹¤ì‹œê°„ ì„±ëŠ¥ ë° ì˜¤ë¥˜ ì¶”ì 
4. **ë¡¤ë°± ê³„íš**: ê° ë‹¨ê³„ë³„ ë¡¤ë°± ì „ëµ ìˆ˜ë¦½

---

## ğŸ“… ìƒì„¸ ì‹¤í–‰ ê³„íš

### Q1 2025: ê¸°ë°˜ êµ¬ì¶•
- [x] MSA ì•„í‚¤í…ì²˜ ë¶„ì„ ì™„ë£Œ
- [ ] ë„ë©”ì¸ ê²½ê³„ ì •ì˜ ë° ì„œë¹„ìŠ¤ ì„¤ê³„
- [ ] ì²« ë²ˆì§¸ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë¶„ë¦¬ (User Service)
- [ ] Database per Service êµ¬í˜„

### Q2 2025: ì„œë¹„ìŠ¤ í™•ì¥
- [ ] Notification Service ë¶„ë¦¬
- [ ] API Gateway êµ¬ì¶•
- [ ] ì„œë¹„ìŠ¤ ê°„ ì´ë²¤íŠ¸ í†µì‹  êµ¬í˜„
- [ ] ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ êµ¬ì¶•

### Q3 2025: ê³ ê¸‰ íŒ¨í„´
- [ ] Audit Service ë¶„ë¦¬
- [ ] Saga Pattern êµ¬í˜„
- [ ] Service Mesh ë„ì…
- [ ] ì„±ëŠ¥ ìµœì í™”

### Q4 2025: ì™„ì„± ë° ìµœì í™”
- [ ] Kubernetes ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] ë¶„ì‚° íŠ¸ë ˆì´ì‹± êµ¬í˜„
- [ ] ìë™ ìŠ¤ì¼€ì¼ë§ ì •ì±… ì ìš©
- [ ] ì „ì²´ ì‹œìŠ¤í…œ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

---

ì´ ë¡œë“œë§µì€ ì²´ê³„ì ì´ê³  ìœ„í—˜ì„ ìµœì†Œí™”í•˜ë©´ì„œ ì™„ì „í•œ MSAë¡œì˜ ì „í™˜ì„ ë³´ì¥í•©ë‹ˆë‹¤.